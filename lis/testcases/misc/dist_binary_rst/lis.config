#Overall driver options
Running mode: 		                     "retrospective"
Map projection of the LIS domain:            "lambert"
Number of nests:                             1 
Number of surface model types:               1
Surface model types:                         "LSM"
Surface model output interval:               "1da" #  "720mn" #"1da"
Land surface model:                          "Noah-MP.4.0.1"
Number of met forcing sources:               1
#Met forcing chosen ensemble member:         #only if the met forcing data source contains its own ensembles.
Blending method for forcings:                "overlay"  # overlay or ensemble
Met forcing sources:                         "MERRA2" 
Topographic correction method (met forcing): "micromet" #“none”,ensemble,“slope-aspect”
Enable spatial downscaling of precipitation: 0 # 0 or 1
Spatial interpolation method (met forcing):  "bilinear" #“budget-bilinear”,“bilinear” or “neighbor”
Spatial upscaling method (met forcing):      "none" #“average” is the only option I see in the user guide
Temporal interpolation method (met forcing): "linear" #linear or trilinear 

Enable new zterp correction (met forcing):   .true. # .false. or .true.

#Runtime options
Forcing variables list file:               "./input/forcing_variables.txt"
Output forcing:                            1   #1-yes
Output parameters:                         0   #0- no
Output model restart files:                1
Output methodology:                        "2d gridspace"  #  for OL run : "2d gridspace", spin up: none
Output data format:                        "netcdf"
Output naming style:                       "3 level hierarchy"
Start mode:                                coldstart # restart or coldstart
Starting year:                             2015
Starting month:                            10
Starting day:                              28
Starting hour:                             0
Starting minute:                           0
Starting second:                           0
Ending year:                               2015
Ending month:                              11
Ending day:                                3
Ending hour:                               00
Ending minute:                             00
Ending second:                             0
Undefined value:                          -9999
Output directory:                          "OUTPUT" # "OUT.DA.synSWE.ASO_daily"
Diagnostic output file:                    "OUTPUT/logs/lislog" # "OUT.DA.synSWE.ASO_daily/logs/lislog"
Number of ensembles per tile:              20

#The following options are used for subgrid tiling based on vegetation
Maximum number of surface type tiles per grid:     1
Minimum cutoff percentage (surface type tiles):    0.10 
Maximum number of soil texture tiles per grid:     1
Minimum cutoff percentage (soil texture tiles):    0.10
Maximum number of soil fraction tiles per grid:    1
Minimum cutoff percentage (soil fraction tiles):   0.10
Maximum number of elevation bands per grid:        1
Minimum cutoff percentage (elevation bands):       0.10
Maximum number of slope bands per grid:            1
Minimum cutoff percentage (slope bands):           0.10
Maximum number of aspect bands per grid:           1
Minimum cutoff percentage (aspect bands):          0.10

#Processor Layout	
#Should match the total number of processors used

Number of processors along x:    10
Number of processors along y:    8
Halo size along x: 0 
Halo size along y: 0 

#------------------------ ROUTING -------------------------------------

Routing model:                    "none"

#-------------------------IRRIGATION-----------------------------------

Irrigation scheme:	"none"
Irrigation ouput interval:	"1da"

#------------------------RADIATIVE TRANSFER MODELS--------------------------

Radiative transfer model:   "none"

#------------------------APPLICATION MODELS---------------------------------

Number of application models: 0


#------------------------DOMAIN SPECIFICATION--------------------------
#Definition of Running Domain
#Specify the domain extremes in latitude and longitude

#The following options list the choice of parameter maps to be 
#used

LIS domain and parameter data file: "./lis_input_fullTuo_OL_M2_SMveg.nc"
Landmask data source:            "LDT"
Landcover data source:           "LDT"
Soil texture data source:        "LDT"
Soil fraction data source:       "none"
Soil color data source:          "none"
Elevation data source:           "LDT"
Slope data source:               "LDT"
Aspect data source:              "LDT"
Curvature data source:           "LDT"
LAI data source:                 "none"
SAI data source:                 "none"
Albedo data source:              "LDT"
Max snow albedo data source:     "LDT"
Greenness data source:           "LDT"  
Roughness data source:           "none"  
Porosity data source:            "none"
Ksat data source:                "none"
B parameter data source:         "none"
Quartz data source:              "none"
Emissivity data source:          "none"


#--------------------------------FORCINGS----------------------------------
MERRA2 forcing directory:                  ./input/MET_FORCING/MERRA2
MERRA2 use lowest model level forcing:     0
MERRA2 use 2m wind fields:                 0
MERRA2 use corrected total precipitation:  0

#NLDAS2 (suppforcing option =5)
#NLDAS2 forcing directory:               "./input/MET_FORCING/NLDAS2.FORCING"       #./inputs/NLDAS2.FORCING  
#NLDAS2 data center source:              "GES-DISC"
#NLDAS2 use model level data:            0 
#NLDAS2 use model based swdown:          0 
#NLDAS2 use model based precip:          0
#NLDAS2 use model based pressure:        0

#CPC STAGEIV 
#STAGE4 forcing directory:		./inputs/STIV


#-----------------------LAND SURFACE MODELS--------------------------
Noah-MP.4.0.1 model timestep:             "1hr" # "3600ss"
Noah-MP.4.0.1 restart output interval:      "1mo"
Noah-MP.4.0.1 restart file:                none #"./LIS_RST_NOAHMP401_201508312300.d01.nc"
Noah-MP.4.0.1 restart file format:          "distributed binary"
Noah-MP.4.0.1 soil parameter table:         "./input/LS_PARAMETERS/noahmp401_parms/SOILPARM.TBL"
Noah-MP.4.0.1 general parameter table:      "./input/LS_PARAMETERS/noahmp401_parms/GENPARM.TBL"
Noah-MP.4.0.1 MP parameter table:           "./input/LS_PARAMETERS/noahmp401_parms/MPTABLE_UMD.TBL"
Noah-MP.4.0.1 number of soil layers:        4
Noah-MP.4.0.1 thickness of soil layers:     0.1  0.3  0.6  1.0
Noah-MP.4.0.1 dynamic vegetation option:                      4  # 1=prescribed; 2=dynamic; 3=calculate; 4=maximum
Noah-MP.4.0.1 canopy stomatal resistance option:              1  # 1=Ball-Berry; 2=Jarvis
Noah-MP.4.0.1 soil moisture factor for stomatal resistance:   1  # 1=Noah; 2=CLM; 3=SSiB
Noah-MP.4.0.1 runoff and groundwater option:                  3  # 1=SIMGM; 2=SIMTOP; 3=Schaake96; 4=BATS
Noah-MP.4.0.1 surface layer drag coefficient option:          1  # 1=M-O; 2=Chen97
Noah-MP.4.0.1 supercooled liquid water option:                1  # 1=NY06; 2=Koren99
Noah-MP.4.0.1 frozen soil permeability option:                1  # 1=NY06; 2=Koren99
Noah-MP.4.0.1 radiation transfer option:                      3  # 1=gap=F(3D;cosz); 2=gap=0; 3=gap=1-Fveg
Noah-MP.4.0.1 snow surface albedo option:                     2  # 1=BATS; 2=CLASS
Noah-MP.4.0.1 rainfall & snowfall option:                     1  # 1=Jordan91; 2=BATS; 3=Noah
Noah-MP.4.0.1 lower boundary of soil temperature option:      2  # 1=zero-flux; 2=Noah
Noah-MP.4.0.1 snow&soil temperature time scheme option:       1  # 1=semi-implicit; 2=fully implicit
Noah-MP.4.0.1 glacier option:                                 2  # 1=include phase change; 2=slab ice (Noah)
Noah-MP.4.0.1 surface resistance option:                      1  # 1=Sakaguchi and Zeng 2009; 2=Sellers (1992); 3=adjusted Sellers; 4=option1 for non-snow and rsurf_snow for snow
Noah-MP.4.0.1 soil configuration option:                      1  # 1=input dominant soil texture; 2=input soil texture varies that varies with depth; 3=soil composition and pedotransfer functions
Noah-MP.4.0.1 soil pedotransfer function option:              1  # 1=Saxton and Rawls (2006) (used when soil_opt=3)
Noah-MP.4.0.1 crop model option:                              0  # 0=No crop model; 1=Liu et al. 2016; 2=Gecros
Noah-MP.4.0.1 urban physics option:                           0  # 0=No; 1=Single-layer; 2=Multi-layer BEP scheme; 3=Multi-layer BEM scheme
Noah-MP.4.0.1 initial surface skin temperature:               288.0
Noah-MP.4.0.1 initial soil temperatures:                      288.0  288.0  288.0  288.0
Noah-MP.4.0.1 initial total soil moistures:                   0.20   0.20   0.20   0.20
Noah-MP.4.0.1 initial snow depth:                             0.0
Noah-MP.4.0.1 initial snow water equivalent:                  0.0
Noah-MP.4.0.1 initial total canopy surface water:             0.0 # TML: Added variable
Noah-MP.4.0.1 initial water table depth:                      2.5
Noah-MP.4.0.1 initial water in the aquifer:                   4900.0
Noah-MP.4.0.1 initial water in aquifer and saturated soil:    4900.0
Noah-MP.4.0.1 initial leaf area index:                        0.5
Noah-MP.4.0.1 reference height of temperature and humidity:   10.0

Template open water timestep:                                 15mn

#---------------------------MODEL OUTPUT CONFIGURATION-----------------------
#Specify the list of ALMA variables that need to be featured in the 
#LSM model output

Output start year:
Output start month:
Output start day:
Output start hour:
Output start minutes:
Output start seconds:

#Energy balance components

Model output attributes file:   './NOAHMP_OUTPUT_LIST.TBL'


#---------------------DATA ASSIMILATION ----------------------------------

#Data Assimilation Options
Number of data assimilation instances:               1
Data assimilation algorithm:                         "EnKF"
Data assimilation set:                               "ASO SWE"
Data assimilation exclude analysis increments:       0
Data assimilation output interval for diagnostics:   "1da"
Data assimilation number of observation types:       1
Data assimilation scaling strategy:                  "none"
Data assimilation output ensemble spread:            0
Data assimilation output processed observations:     0
Data assimilation output innovations:                1
Data assimilation use a trained forward model:       0
Data assimilation trained forward model output file: "none"
Number of state variables:                           2

Data assimilation observation domain file:  "./lis_input_fullTuo_OL_M2_SMveg.nc"
Apply perturbation bias correction:        1
Bias estimation algorithm:                "none"
Bias estimation attributes file:          "none"
Bias estimation restart output frequency:
Bias estimation start mode:
Bias estimation restart file:

#Perturbation options
Perturbations start mode:                 "coldstart"
Perturbations restart output interval:    "1mo"
Perturbations restart filename:           "none" #./LIS_DAPERT_200906302330.d01.bin 


Forcing perturbation algorithm:           "GMAO scheme"
Forcing perturbation frequency:           "1hr"
Forcing attributes file:                  ./input/forcing_attribs.txt
Forcing perturbation attributes file:     ./input/forcing_pert_attribs.txt

State perturbation algorithm:             "GMAO scheme"
State perturbation frequency:             "3hr"
State attributes file:                    ./input/noah_snow_attribs.txt
State perturbation attributes file:       ./input/noah_snow_pertattribs.txt

Observation perturbation algorithm:       "GMAO scheme"
Observation perturbation frequency:       "3hr"
Observation attributes file:              ./input/ASOSWE_attribs.txt
Observation perturbation attributes file: ./input/ASOSWE_pertattribs.txt

ASO SWE data directory:   ./input/SynObs_ASO
